# This is an example .goreleaser.yml file with some sensible defaults.
# Make sure to check the documentation at https://goreleaser.com
# The lines below are called `modelines`. See `:help modeline`
# Feel free to remove those if you don't want/need to use them.
# yaml-language-server: $schema=https://goreleaser.com/static/schema.json
# vim: set ts=2 sw=2 tw=0 fo=cnqoj
version: 2
report_sizes: true
project_name: namzd
before:
  hooks:
    # You may remove this if you don't use go modules.
    - go mod tidy
builds:
  - goos:
      - linux
      - windows
      - darwin
    # List of combinations of GOOS + GOARCH + GOARM to ignore.
    ignore:
      - goos: windows
        goarch: "386"
      - goos: windows
        goarch: "arm64"
      - goos: linux
        goarch: "386"
      - goos: linux
        goarch: "arm64"
archives:
  - formats: ['tgz']
    files:
      - none*
    # this name template makes the OS and Arch compatible with the results of `uname`.
    name_template: >-
      namzd_ {{- if eq .Os "darwin" }} {{- if .Arm64 }}apple_silicon{{ else }}apple_intel_cpu{{ end }} {{- else }}{{ .Os }}{{ end -}}
    # use zip for windows archives
    format_overrides:
      - goos: windows
        formats: ['zip']
nfpms:
  - id: Linux
    package_name: "retrotxt"
    file_name_template: "retrotxt"
    vendor: Ben Garrett.
    homepage: https://retrotxt.com/go
    maintainer: Ben Garrett <code.by.ben@gmail.com>
    description: Read legacy code page encoded textfiles in a modern Unicode terminal.
    license: LGPL 3.0
    formats:
      - apk
      - deb
      - rpm
      - archlinux
changelog:
  sort: asc
  filters:
    exclude:
      - "^docs:"
      - "^test:"
release:
  footer: >-
    ---

    Released by [GoReleaser](https://github.com/goreleaser/goreleaser).
